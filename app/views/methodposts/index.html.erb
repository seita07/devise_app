<h1>勉強法投稿一覧</h1>
<% if flash[:notice] %>
      <div class="flash">
        <h3><%= flash[:notice] %></h3>
      </div>
<% end %>

<ul>
  <% @methodposts.each do |methodpost| %>
    <li>
    <small>
     <%= time_ago_in_words(methodpost.created_at) %>前
    </small>
    <p><strong>ユーザー名:</strong><%= link_to "#{methodpost.user.name}", "/users/#{methodpost.user_id}" %> ID:<%= methodpost.user_id%></p>
    <p><strong>投稿内容:</strong><%= link_to "#{methodpost.content}", methodpost %>投稿ID:<%= methodpost.id%></p>
    <p><strong>投稿科目:</strong><%= methodpost.subjects%></p>
    </li>
    <% if user_signed_in? %>
     <% @methodlikes_count = MethodLike.where(methodpost_id: methodpost.id).count %>
    <% if @methodlike = MethodLike.find_by(user_id: current_user.id, methodpost_id: methodpost.id) %>
      <%= link_to  "/methodposts/#{methodpost.id}/methodlike/#{@methodlike.id}", method: :delete do %>
        <i class="fas fa-heart like-btn-unlike"><%= @methodlikes_count %>いいね</i>
      <% end %>
    <% else %>
        <%= link_to  "/methodposts/#{methodpost.id}/methodlike", method: :post do %>
          <i class="fas fa-heart like-btn"><%= @methodlikes_count %>いいね</i>
        <% end %>
    <% end %>
    <% end %>
    <% @review_count = Review.where(methodpost_id: methodpost.id).count %>
    レビュー数<%= @review_count %>
  <% end %>

  <div class="card-content">
              <div class="content">
                <div class="content average-score">
                  <div class="star-rating mb-2">
                    <div class="star-rating-front" style="width:">★★★★★</div>
                    <div class="star-rating-back">★★★★★</div>
                  </div>
                  <div class="average-score-display ml-3 pt-2">
                    点（件のレビュー）
                  </div>
                </div>
              </div>
            </div>
</ul>
<p><%= link_to "勉強法投稿新規作成", new_methodpost_path %></p>